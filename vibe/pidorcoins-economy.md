# –≠–∫–æ–Ω–æ–º–∏–∫–∞ –ü–∏–¥–æ—Ä-–ö–æ–π–Ω–æ–≤: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–∞—Ä–∏–∞–Ω—Ç—ã —Ç—Ä–∞—Ç—ã –∫–æ–π–Ω–æ–≤](#-–≤–∞—Ä–∏–∞–Ω—Ç—ã-—Ç—Ä–∞—Ç—ã-–∫–æ–π–Ω–æ–≤)
2. [–°–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–π–Ω–æ–≤](#-—Å–ø–æ—Å–æ–±—ã-–ø–æ–ª—É—á–µ–Ω–∏—è-–∫–æ–π–Ω–æ–≤)
3. [–ë–∞–ª–∞–Ω—Å —ç–∫–æ–Ω–æ–º–∏–∫–∏](#-–±–∞–ª–∞–Ω—Å-—ç–∫–æ–Ω–æ–º–∏–∫–∏)
4. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π Telegram](#-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-–∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π-telegram)
5. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

---

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç—Ä–∞—Ç—ã –∫–æ–π–Ω–æ–≤

### 1. –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∏–¥–æ—Ä–∞ (Immunity Shield)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–≥—Ä–æ–∫ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∑–∞—â–∏—Ç—É –Ω–∞ 1 –¥–µ–Ω—å. –ï—Å–ª–∏ –µ–≥–æ –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–∞–Ω–¥–æ–º, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–≤—ã–±–æ—Ä.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 10 –∫–æ–π–Ω–æ–≤ |
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 1 –¥–µ–Ω—å |
| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ | –ù–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é |

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (2026-01-08, —É–ª—É—á—à–µ–Ω–æ 2026-01-09)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å `GamePlayerEffect` —Å –ø–æ–ª—è–º–∏ `immunity_year`, `immunity_day`, `immunity_last_used` (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–æ –ø–æ –∏–≥—Ä–∞–º —á–µ—Ä–µ–∑ `game_id`)
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ year+day –≤–º–µ—Å—Ç–æ datetime –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –±–∞–≥–æ–≤ —Å –≤—Ä–µ–º–µ–Ω–µ–º —Å—É—Ç–æ–∫ (v3)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `pidor_cmd` - –ø–µ—Ä–µ–≤—ã–±–æ—Ä –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞—â–∏—Ç–µ
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é `/pidorshop`
- ‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ–π–Ω–æ–≤ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É –∏–≥—Ä–æ–∫—É –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –∑–∞—â–∏—Ç—ã
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –≤—Å–µ –∏–≥—Ä–æ–∫–∏ –∑–∞—â–∏—â–µ–Ω—ã
- ‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ –µ—Å–ª–∏ –∑–∞—â–∏—Ç–∞ –∞–∫—Ç–∏–≤–Ω–∞ (v3)

---

### 2. –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç–∏—Ç—É–ª (Custom Title)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–≥—Ä–æ–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–¥–ø–∏—Å—å, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—É—é –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –∏ –ø—Ä–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è—Ö.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 80 –∫–æ–π–Ω–æ–≤ |
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ü–æ—Å—Ç–æ—è–Ω–Ω–æ |
| –ü—Ä–∏–º–µ—Ä—ã | "–õ–µ–≥–µ–Ω–¥–∞ —á–∞—Ç–∞", "–ù–µ–ø–æ–±–µ–¥–∏–º—ã–π", "–ü–∏–¥–æ—Ä-–º–∞–≥–∏—Å—Ç—Ä" |

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `custom_title: str` –≤ –º–æ–¥–µ–ª—å `TGUser`
- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–∞—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (`/pidorstats`, `/pidorall`)
- –ö–æ–º–∞–Ω–¥–∞ `/pidortitle <—Ç–µ–∫—Å—Ç>` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏

---

### 3. –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ñ—Ä–∞–∑–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (Custom Phrase)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–±–µ–¥–∏—Ç–µ–ª—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–≤–æ—é —Ñ—Ä–∞–∑—É –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏–∑ —ç—Ç–∞–ø–æ–≤ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (stage1-4).

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 20 –∫–æ–π–Ω–æ–≤ (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ) |
| –ú–æ–¥–µ—Ä–∞—Ü–∏—è | –û–¥–æ–±—Ä–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–∞—Ç–∞ |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–µ |

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `CustomPhrases` —Å –ø–æ–ª—è–º–∏: `id`, `game_id`, `user_id`, `stage`, `text`, `approved`, `used`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Å–ª—É—á–∞–π–Ω–æ–π —Ñ—Ä–∞–∑—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º stage
- –ö–æ–º–∞–Ω–¥–∞ `/pidorphrase <stage> <—Ç–µ–∫—Å—Ç>` –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

---

### 4. –î–≤–æ–π–Ω–æ–π —à–∞–Ω—Å (Double Chance)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í —Å–ª–µ–¥—É—é—â–µ–º —Ä–æ–∑—ã–≥—Ä—ã—à–µ –∏–º—è –∏–≥—Ä–æ–∫–∞ —É—á–∞—Å—Ç–≤—É–µ—Ç –¥–≤–∞–∂–¥—ã (—É–¥–≤–∞–∏–≤–∞–µ—Ç —à–∞–Ω—Å —Å—Ç–∞—Ç—å –ø–∏–¥–æ—Ä–æ–º). –ú–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å –¥–ª—è –ª—é–±–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤ —á–∞—Ç–µ.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 8 –∫–æ–π–Ω–æ–≤ |
| –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ | –°–ª–µ–¥—É—é—â–∏–π —Ä–æ–∑—ã–≥—Ä—ã—à |
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –¢—Ä–æ–ª–ª–∏–Ω–≥ –¥—Ä—É–∑–µ–π –∏–ª–∏ —Å–∞–º–æ–∏—Ä–æ–Ω–∏—è |
| –ü–æ–∫—É–ø–∫–∞ | –î–ª—è —Å–µ–±—è –∏–ª–∏ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ |
| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ | –û–¥–∏–Ω –ø–æ–∫—É–ø–∞—Ç–µ–ª—å = –æ–¥–Ω–∞ –ø–æ–∫—É–ø–∫–∞ –≤ –¥–µ–Ω—å |

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (2026-01-08, —É–ª—É—á—à–µ–Ω–æ 2026-01-09)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `DoubleChancePurchase` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö –ø–æ–∫—É–ø–æ–∫ (v3)
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ year+day –≤–º–µ—Å—Ç–æ datetime –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (v3)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `pidor_cmd` - –∏–≥—Ä–æ–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø—É–ª –≤—ã–±–æ—Ä–∞ –¥–≤–∞–∂–¥—ã
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é `/pidorshop` —Å –≤—ã–±–æ—Ä–æ–º —Ü–µ–ª–µ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã (–ø–æ–º–µ—Ç–∫–∞ `is_used = True`)
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –¥–≤–æ–π–Ω–æ–≥–æ —à–∞–Ω—Å–∞
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è (–∫—Ç–æ –∫—É–ø–∏–ª –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –¥–ª—è –∫–æ–≥–æ)
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –æ–¥–∏–Ω –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∫—É–ø–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –≤ –¥–µ–Ω—å (v3)
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏: –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–≤ –º–æ–≥—É—Ç –∫—É–ø–∏—Ç—å –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –æ–¥–Ω–æ–º—É –∏–≥—Ä–æ–∫—É (v3)

---

### 5. –ü–µ—Ä–µ–≤—ã–±–æ—Ä—ã (Reroll)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ—Å–ª–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–∏–¥–æ—Ä–∞ –¥–Ω—è –ª—é–±–æ–π —É—á–∞—Å—Ç–Ω–∏–∫ –º–æ–∂–µ—Ç –∑–∞–ø–ª–∞—Ç–∏—Ç—å –∫–æ–π–Ω—ã, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–≤—ã–±–æ—Ä. –¢–µ–∫—É—â–∏–π "–ø–æ–±–µ–¥–∏—Ç–µ–ª—å" —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è, –∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –ø–∏–¥–æ—Ä –¥–Ω—è.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 15 –∫–æ–π–Ω–æ–≤ |
| –õ–∏–º–∏—Ç | 1 –ø–µ—Ä–µ–≤—ã–±–æ—Ä –Ω–∞ —á–∞—Ç –≤ –¥–µ–Ω—å |
| –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ | 5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è |
| –£—á–∞—Å—Ç–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è | –î–∞, —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–µ |

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (2026-01-22, —É–ª—É—á—à–µ–Ω–æ 2026-01-23)

**–ú–µ—Ö–∞–Ω–∏–∫–∞:**
- –ü–æ—Å–ª–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–∏–¥–æ—Ä–∞ –¥–Ω—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "üîÑ –ü–µ—Ä–µ–≤—ã–±–æ—Ä—ã (15 üí∞)"
- –õ—é–±–æ–π –∏–≥—Ä–æ–∫ —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É
- –¢–µ–∫—É—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–Ω—É–ª–∏—Ä—É–µ—Ç—Å—è, –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –Ω–æ–≤—ã–π —Ä–æ–∑—ã–≥—Ä—ã—à
- –ö–Ω–æ–ø–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–ª–∏ —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç
- –ï—Å–ª–∏ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä —Å–∞–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–∏–¥–æ—Ä–æ–º ‚Äî —ç—Ç–æ "–∫–∞—Ä–º–∞" üòà
- **–í–ê–ñ–ù–û:** –û–±–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è (—Å—Ç–∞—Ä—ã–π –∏ –Ω–æ–≤—ã–π) –ø–æ–ª—É—á–∞—é—Ç –Ω–∞–≥—Ä–∞–¥—É –≤ –∫–æ–π–Ω–∞—Ö!

**–£—á—ë—Ç —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö (v2):**
- ‚úÖ **–ó–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚Äî –µ—Å–ª–∏ –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –∏–≥—Ä–æ–∫ –≤—ã–±—Ä–∞–Ω, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–≤—ã–±–æ—Ä
- ‚úÖ **–î–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –¥–µ–π—Å—Ç–≤—É–µ—Ç** ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ —É–∂–µ —Å—Ä–∞–±–æ—Ç–∞–ª –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ä–æ–∑—ã–≥—Ä—ã—à–µ
- ‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∑–∞—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –¥–≤–∞–∂–¥—ã** ‚Äî –Ω–∞–≥—Ä–∞–¥–∞ –∑–∞ —Å—Ç–∞—Ä–æ–≥–æ –∏ –Ω–æ–≤–æ–≥–æ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
- ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–π–Ω–∞—Ö** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö
- ‚úÖ **–û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∏ –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ `GameResult`: `reroll_available`, `reroll_initiator_id`, `original_winner_id`, `reroll_message_id`
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å `reroll_service.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ `can_reroll()`, `execute_reroll()`, `remove_reroll_button_after_timeout()`
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å `selection_service.py` —Å –æ–±—â–µ–π –ª–æ–≥–∏–∫–æ–π –≤—ã–±–æ—Ä–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Å —É—á—ë—Ç–æ–º —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (v2)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ inline-–∫–Ω–æ–ø–∫–∞ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `pidor_cmd`
- ‚úÖ –°–æ–∑–¥–∞–Ω callback-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `handle_reroll_callback()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏
- ‚úÖ –¢–∞–π–º–µ—Ä –Ω–∞ 5 –º–∏–Ω—É—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç–∞—Ä–æ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ –∏ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–µ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –ø—Ä–∏ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö —á–µ—Ä–µ–∑ `process_predictions_for_reroll()` (v2)
- ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ö –∏ –¥–≤–æ–π–Ω–æ–º —à–∞–Ω—Å–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (v2)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–π–Ω–∞—Ö –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö (v2)

---

### 6. –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–π–Ω–æ–≤ (Transfer)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å —á–∞—Å—Ç—å —Å–≤–æ–∏—Ö –∫–æ–π–Ω–æ–≤ –¥—Ä—É–≥–æ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É —á–∞—Ç–∞. –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤–∑–∏–º–∞–µ—Ç—Å—è –∫–æ–º–∏—Å—Å–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∏–¥—ë—Ç –≤ –±–∞–Ω–∫ —á–∞—Ç–∞.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ö–æ–º–∏—Å—Å–∏—è | 10% (–º–∏–Ω–∏–º—É–º 1 –∫–æ–π–Ω) |
| –ö—É–¥–∞ –∏–¥—ë—Ç –∫–æ–º–∏—Å—Å–∏—è | –í –±–∞–Ω–∫ —á–∞—Ç–∞ |
| –ú–∏–Ω–∏–º—É–º –ø–µ—Ä–µ–¥–∞—á–∏ | 2 –∫–æ–π–Ω–∞ |
| –ú–∞–∫—Å–∏–º—É–º –ø–µ—Ä–µ–¥–∞—á–∏ | –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π |
| –ö—É–ª–¥–∞—É–Ω | 1 –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –¥–µ–Ω—å (–ø–æ `year+day`, –∫–∞–∫ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã) |
| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –ß–µ—Ä–µ–∑ –º–∞–≥–∞–∑–∏–Ω `/pidorshop` |

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (2026-01-22)

**–ú–µ—Ö–∞–Ω–∏–∫–∞:**
```
–ü–µ—Ä–µ–¥–∞—á–∞ 50 –∫–æ–π–Ω–æ–≤:
- –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —Ç–µ—Ä—è–µ—Ç: 50 –∫–æ–π–Ω–æ–≤
- –ü–æ–ª—É—á–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç: 45 –∫–æ–π–Ω–æ–≤ (50 - 10%)
- –ë–∞–Ω–∫ —á–∞—Ç–∞ –ø–æ–ª—É—á–∞–µ—Ç: 5 –∫–æ–π–Ω–æ–≤ (–∫–æ–º–∏—Å—Å–∏—è)
```

**–û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏:**
- –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–µ–±–µ
- –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –±–æ–ª—å—à–µ, —á–µ–º –µ—Å—Ç—å –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
- –ü–æ–ª—É—á–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –∏–≥—Ä–µ
- –ö—É–ª–¥–∞—É–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ `year+day` (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ 23:50 –∏ –≤ 00:10 —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å `ChatBank` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –±–∞–Ω–∫–∞ —á–∞—Ç–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å `CoinTransfer` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—É–ª–¥–∞—É–Ω–∞ (—Å –ø–æ–ª—è–º–∏ `year`, `day`)
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å `transfer_service.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
  - `calculate_commission()` - —Ä–∞—Å—á—ë—Ç –∫–æ–º–∏—Å—Å–∏–∏ 10% (–º–∏–Ω–∏–º—É–º 1 –∫–æ–π–Ω)
  - `has_transferred_today()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞ –ø–æ year+day
  - `can_transfer()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏
  - `get_or_create_chat_bank()` - –ø–æ–ª—É—á–µ–Ω–∏–µ/—Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–Ω–∫–∞ —á–∞—Ç–∞
  - `execute_transfer()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ —Å –∫–æ–º–∏—Å—Å–∏–µ–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –º–∞–≥–∞–∑–∏–Ω `/pidorshop` —Å –ø—É–Ω–∫—Ç–∞–º–∏ "üí∏ –ü–µ—Ä–µ–¥–∞—Ç—å –∫–æ–π–Ω—ã" –∏ "üè¶ –ë–∞–Ω–∫ —á–∞—Ç–∞"
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã callback-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
  - `handle_shop_transfer_callback()` - –ø–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
  - `handle_shop_transfer_select_callback()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏
  - `handle_shop_bank_callback()` - –ø–æ–∫–∞–∑ –±–∞–ª–∞–Ω—Å–∞ –±–∞–Ω–∫–∞
  - `handle_shop_back_callback()` - –≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é –º–∞–≥–∞–∑–∏–Ω–∞
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É –±–∞–ª–∞–Ω—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ (–±—É–¥—É—â–µ–µ):**
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π —Ä–æ–∑—ã–≥—Ä—ã—à —Å—Ä–µ–¥–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
- –î–∂–µ–∫–ø–æ—Ç –¥–ª—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Å —Å–µ—Ä–∏–µ–π –ø–æ–±–µ–¥
- –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

---

### 7. –ê–Ω–æ–Ω–∏–º–Ω—ã–π —Ä–æ–∑—ã–≥—Ä—ã—à (Anonymous Game)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–ª–µ–¥—É—é—â–∏–π —Ä–æ–∑—ã–≥—Ä—ã—à –ø—Ä–æ—Ö–æ–¥–∏—Ç –∞–Ω–æ–Ω–∏–º–Ω–æ - –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –Ω–µ –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 25 –∫–æ–π–Ω–æ–≤ |
| –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ | –°–ª–µ–¥—É—é—â–∏–π —Ä–æ–∑—ã–≥—Ä—ã—à |
| –≠—Ñ—Ñ–µ–∫—Ç | –°–∫—Ä—ã—Ç–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –æ—Ç –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ |

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `is_anonymous: bool` –≤ GameResult
- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
- –ö–æ–º–∞–Ω–¥–∞ `/pidoranonymous` –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

---

### 8. –£–¥–≤–æ–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã (Double Reward)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–≤–æ–∏—Ç—å –∫–æ–π–Ω—ã –∑–∞ —Å–ª–µ–¥—É—é—â—É—é –ø–æ–±–µ–¥—É.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 30 –∫–æ–π–Ω–æ–≤ |
| –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ | –°–ª–µ–¥—É—é—â–∞—è –ø–æ–±–µ–¥–∞ |
| –≠—Ñ—Ñ–µ–∫—Ç | –ú–Ω–æ–∂–∏—Ç–µ–ª—å √ó2 –¥–ª—è –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –ø–æ–±–µ–¥—É |

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `next_win_multiplier: int` –≤ –º–æ–¥–µ–ª—å –∏–≥—Ä–æ–∫–∞
- –ü—Ä–∏–º–µ–Ω—è—Ç—å –º–Ω–æ–∂–∏—Ç–µ–ª—å –ø—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ –∫–æ–π–Ω–æ–≤
- –ö–æ–º–∞–Ω–¥–∞ `/pidordoublewin` –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

---

### 9. –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (Prediction)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–¥–µ–ª–∞—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ, –∫—Ç–æ —Å—Ç–∞–Ω–µ—Ç –ø–∏–¥–æ—Ä–æ–º –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–æ–∑—ã–≥—Ä—ã—à–µ. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —á–∞—Ç–∞ –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏.

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 3 –∫–æ–π–Ω–∞ |
| –ù–∞–≥—Ä–∞–¥–∞ | +30 –∫–æ–π–Ω–æ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ |
| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ | 1 –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –≤ –¥–µ–Ω—å |
| –ö–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ | `ceil(–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–∏–≥—Ä–æ–∫–æ–≤ / 10)` |
| Self-prediction | ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–æ |

**–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤:**

| –ò–≥—Ä–æ–∫–æ–≤ –≤ —á–∞—Ç–µ | –ö–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É–≥–∞–¥–∞—Ç—å |
|----------------|------------|---------------------|
| 1-10 | 1 | 10-100% |
| 11-20 | 2 | 10-18% |
| 21-30 | 3 | 10-14% |
| 31-40 | 4 | 10-13% |

**–§–æ—Ä–º—É–ª–∞:** `–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ = ceil(–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–∏–≥—Ä–æ–∫–æ–≤ / 10)`

–≠—Ç–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É–≥–∞–¥—ã–≤–∞–Ω–∏—è –ø—Ä–∏–º–µ—Ä–Ω–æ –¥–æ 10-15% –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —á–∞—Ç–æ–≤!

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (2026-01-08, —É–ª—É—á—à–µ–Ω–æ 2026-01-09, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã 2026-01-22, UX —É–ª—É—á—à–µ–Ω–∏—è 2026-01-22)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å `Prediction` —Å –ø–æ–ª–µ–º `predicted_user_ids` (JSON) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å `PredictionDraft` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –≤ –ë–î (v5)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç year+day –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —Å –¥—Ä—É–≥–∏–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ `pidor_cmd` (+30 –∫–æ–π–Ω–æ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ)
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é `/pidorshop` —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- ‚úÖ –û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –≤—Å–µ—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 1 –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –≤ –¥–µ–Ω—å –Ω–∞ –∏–≥—Ä—É
- ‚úÖ –í—ã–¥–µ–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å `prediction_service.py`
- ‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ –µ—Å–ª–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ (v3)
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–º–µ—Ä–∞ —á–∞—Ç–∞ (v4)
- ‚úÖ UI –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º (v4)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã –ø–æ –ª—é–±–æ–º—É –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (v4)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –Ω–∞–≤–µ—Ä—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (v5)
- ‚úÖ –£–±—Ä–∞–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–∞–º–æ–≥–æ —Å–µ–±—è (v5)
- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ "–í—ã–±–µ—Ä–∏—Ç–µ –µ—â—ë –æ–¥–Ω–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞" –∏ "–û—Ç–º–µ–Ω–∞" (v5)
- ‚úÖ –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î –≤–º–µ—Å—Ç–æ –ø–∞–º—è—Ç–∏ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ (v5)

---

## üí∞ –°–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–π–Ω–æ–≤

### 1. –ò–≥—Ä–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (Game Actions)

**–ú–µ—Ö–∞–Ω–∏–∫–∞:** –ö–æ–π–Ω—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∑–∞ —É—á–∞—Å—Ç–∏–µ –≤ –∏–≥—Ä–µ.

| –î–µ–π—Å—Ç–≤–∏–µ | –ù–∞–≥—Ä–∞–¥–∞ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ |
|----------|---------|-------------|
| –ü–æ–±–µ–¥–∞ –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ | +4 –∫–æ–π–Ω–∞ | 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å |
| –ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã `/pidor` | +1 –∫–æ–π–Ω | 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å |
| Self-pidor (–ø–æ–±–µ–¥–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ) | +8 –∫–æ–π–Ω–æ–≤ | 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å |

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–µ
- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞–≥—Ä–∞–¥—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

### 2. –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (Achievements)

**–ú–µ—Ö–∞–Ω–∏–∫–∞:** –†–∞–∑–æ–≤—ã–µ –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π.

#### –†–∞–∑–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
| –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ | –£—Å–ª–æ–≤–∏–µ | –ù–∞–≥—Ä–∞–¥–∞ |
|------------|---------|---------|
| ü©∏ –ü–µ—Ä–≤–∞—è –∫—Ä–æ–≤—å | –ü–µ—Ä–≤–∞—è –ø–æ–±–µ–¥–∞ –≤ —á–∞—Ç–µ | +10 –∫–æ–π–Ω–æ–≤ |
| üèÜ –ù–µ—É–¥–∞—á–Ω–∏–∫ –≥–æ–¥–∞ | –ë–æ–ª—å—à–µ –≤—Å–µ—Ö –ø–æ–±–µ–¥ –∑–∞ –≥–æ–¥ | +50 –∫–æ–π–Ω–æ–≤ |
| üéñÔ∏è –í–µ—Ç–µ—Ä–∞–Ω | –£—á–∞—Å—Ç–∏–µ –≤ –∏–≥—Ä–µ 365 –¥–Ω–µ–π | +100 –∫–æ–π–Ω–æ–≤ |
| üìÖ –ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä | –ü–æ–±–µ–¥–∞ –≤–æ –≤—Å–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ | +25 –∫–æ–π–Ω–æ–≤ |
| üî• –§–µ–Ω–∏–∫—Å | –ü–æ–±–µ–¥–∞ –ø–æ—Å–ª–µ 30+ –¥–Ω–µ–π –±–µ–∑ –ø–æ–±–µ–¥ | +15 –∫–æ–π–Ω–æ–≤ |
| üéØ –°–Ω–∞–π–ø–µ—Ä | 3 –ø–æ–±–µ–¥—ã –ø–æ–¥—Ä—è–¥ | +20 –∫–æ–π–Ω–æ–≤ |
| ‚ö° –°–µ—Ä–∏—è 5 | 5 –ø–æ–±–µ–¥ –ø–æ–¥—Ä—è–¥ | +30 –∫–æ–π–Ω–æ–≤ |
| üåü –°–µ—Ä–∏—è 7 | 7 –ø–æ–±–µ–¥ –ø–æ–¥—Ä—è–¥ | +50 –∫–æ–π–Ω–æ–≤ |

#### –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
| –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ | –£—Å–ª–æ–≤–∏–µ | –ù–∞–≥—Ä–∞–¥–∞ | –ü–µ—Ä–∏–æ–¥ |
|------------|---------|---------|--------|
| üëë –ö–æ—Ä–æ–ª—å –º–µ—Å—è—Ü–∞ | –ë–æ–ª—å—à–µ –≤—Å–µ—Ö –ø–æ–±–µ–¥ –∑–∞ –º–µ—Å—è—Ü | +30 –∫–æ–π–Ω–æ–≤ | –ï–∂–µ–º–µ—Å—è—á–Ω–æ |
| üí¨ –ê–∫—Ç–∏–≤–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ | –ù–∞–∏–±–æ–ª—å—à–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ —á–∞—Ç–µ –∑–∞ –º–µ—Å—è—Ü | +15 –∫–æ–π–Ω–æ–≤ | –ï–∂–µ–º–µ—Å—è—á–Ω–æ |
| üìÖ –ê–∫—Ç–∏–≤–Ω–∞—è –Ω–µ–¥–µ–ª—è | –£—á–∞—Å—Ç–∏–µ –≤ 3+ —Ä–æ–∑—ã–≥—Ä—ã—à–∞—Ö –∑–∞ –Ω–µ–¥–µ–ª—é | +5 –∫–æ–π–Ω–æ–≤ | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ |

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (—Å–º. –ø–ª–∞–Ω `pidorcoins-achievements-plan.md`)
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–π–Ω–æ–≤

---

## üìä –ë–∞–ª–∞–Ω—Å —ç–∫–æ–Ω–æ–º–∏–∫–∏

### –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–≥—Ä–∞–¥

```python
VICTORY_REWARDS = {
    'base': 4,           # –ë–∞–∑–æ–≤–∞—è –Ω–∞–≥—Ä–∞–¥–∞ –∑–∞ –ø–æ–±–µ–¥—É
    'self_pidor': 8,     # –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ self-pidor
    'command': 1,        # –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã
}
```

### –¶–µ–Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

```python
SHOP_PRICES = {
    # –†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏ (—á–∞—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
    'double_chance': 8,
    'prediction': 3,

    # –¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ (—Å—Ä–µ–¥–Ω—è—è —á–∞—Å—Ç–æ—Ç–∞)
    'immunity_1day': 10,
    'reroll': 15,           # –ù–û–í–û–ï: –ø–µ—Ä–µ–≤—ã–±–æ—Ä—ã
    'custom_phrase_once': 20,
    'anonymous_game': 25,

    # –ü—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ (—Ä–µ–¥–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
    'custom_title': 80,
    'double_reward': 30,
}

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–π–Ω–æ–≤
TRANSFER_PARAMS = {
    'commission_percent': 10,  # –ö–æ–º–∏—Å—Å–∏—è 10%
    'min_commission': 1,       # –ú–∏–Ω–∏–º—É–º 1 –∫–æ–π–Ω –∫–æ–º–∏—Å—Å–∏–∏
    'min_transfer': 2,         # –ú–∏–Ω–∏–º—É–º 2 –∫–æ–π–Ω–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏
    'cooldown_days': 1,        # 1 –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –¥–µ–Ω—å
}
```

### –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏–≥—Ä–æ–≤–æ–π —ç–∫–æ–Ω–æ–º–∏–∫–∏

#### –ê–∫—Ç–∏–≤–Ω—ã–π –∏–≥—Ä–æ–∫ (–º–µ—Å—è—Ü) ‚Äî —á–∞—Ç 25 —á–µ–ª–æ–≤–µ–∫

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –†–∞—Å—á—ë—Ç | –ö–æ–π–Ω—ã |
|----------|--------|-------|
| –ü–æ–±–µ–¥—ã | 3 √ó 4 | 12 |
| –ö–æ–º–∞–Ω–¥—ã | 3 √ó 1 | 3 |
| –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è | ~2 —à—Ç | 30 |
| –ê–∫—Ç–∏–≤–Ω–∞—è –Ω–µ–¥–µ–ª—è | 4 √ó 5 | 20 |
| **–ò—Ç–æ–≥–æ** | | **~65 –∫–æ–π–Ω–æ–≤** |

**–ß—Ç–æ –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å:**
- **4 —Ä–∞–∑–∞ –∑–∞—â–∏—Ç—É** (40 –∫–æ–π–Ω–æ–≤) ‚Äî –º–∞–∫—Å–∏–º—É–º 1 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é, –≤ –º–µ—Å—è—Ü–µ ~4 –Ω–µ–¥–µ–ª–∏
- –ò–õ–ò **4 –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞** (60 –∫–æ–π–Ω–æ–≤) ‚Äî 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å –Ω–∞ —á–∞—Ç
- –ò–õ–ò 3 –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ—Ä–∞–∑—ã (60 –∫–æ–π–Ω–æ–≤)
- –ò–õ–ò 8 —Ä–∞–∑ –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å (64 –∫–æ–π–Ω–∞)
- –ò–õ–ò 21 –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (63 –∫–æ–π–Ω–∞)
- –ò–õ–ò –Ω–∞–∫–æ–ø–∏—Ç—å –Ω–∞ —Ç–∏—Ç—É–ª (80 –∫–æ–π–Ω–æ–≤ —á–µ—Ä–µ–∑ ~1.2 –º–µ—Å—è—Ü–∞)
- –ò–õ–ò –∫–æ–º–±–∏–Ω–∞—Ü–∏—è: **2 –∑–∞—â–∏—Ç—ã + 2 –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞ + 5 –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π** (20+30+15=65 –∫–æ–π–Ω–æ–≤)

#### –û–±—ã—á–Ω—ã–π –∏–≥—Ä–æ–∫ (–º–µ—Å—è—Ü) ‚Äî —á–∞—Ç 25 —á–µ–ª–æ–≤–µ–∫

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –†–∞—Å—á—ë—Ç | –ö–æ–π–Ω—ã |
|----------|--------|-------|
| –ü–æ–±–µ–¥—ã | 1 √ó 4 | 4 |
| –ö–æ–º–∞–Ω–¥—ã | 1 √ó 1 | 1 |
| –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è | ~1 —à—Ç | 15 |
| –ê–∫—Ç–∏–≤–Ω–∞—è –Ω–µ–¥–µ–ª—è | 2 √ó 5 | 10 |
| **–ò—Ç–æ–≥–æ** | | **~30 –∫–æ–π–Ω–æ–≤** |

**–ß—Ç–æ –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å:**
- **3 —Ä–∞–∑–∞ –∑–∞—â–∏—Ç—É** (30 –∫–æ–π–Ω–æ–≤) ‚Äî —Ö–≤–∞—Ç–∏—Ç –Ω–∞ 3 –Ω–µ–¥–µ–ª–∏
- –ò–õ–ò **2 –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞** (30 –∫–æ–π–Ω–æ–≤)
- –ò–õ–ò 3 —Ä–∞–∑–∞ –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å (24 –∫–æ–π–Ω–∞)
- –ò–õ–ò 10 –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π (30 –∫–æ–π–Ω–æ–≤)
- –ò–õ–ò –∫–æ–º–±–∏–Ω–∞—Ü–∏—è: **1 –∑–∞—â–∏—Ç–∞ + 1 –ø–µ—Ä–µ–≤—ã–±–æ—Ä + 1 –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ** (10+15+3=28 –∫–æ–π–Ω–æ–≤)

### –§–æ—Ä–º—É–ª–∞ –±–∞–ª–∞–Ω—Å–∞ (—á–∞—Ç 25 —á–µ–ª–æ–≤–µ–∫)

```
–°—Ä–µ–¥–Ω–∏–π –¥–æ—Ö–æ–¥ –∑–∞ –º–µ—Å—è—Ü = (–ø–æ–±–µ–¥ √ó 4) + (–∫–æ–º–∞–Ω–¥—ã √ó 1) + –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è + (–∞–∫—Ç–∏–≤–Ω—ã–µ_–Ω–µ–¥–µ–ª–∏ √ó 5)

–ê–∫—Ç–∏–≤–Ω—ã–π –∏–≥—Ä–æ–∫: ~60-70 –∫–æ–π–Ω–æ–≤/–º–µ—Å—è—Ü
–û–±—ã—á–Ω—ã–π –∏–≥—Ä–æ–∫: ~25-35 –∫–æ–π–Ω–æ–≤/–º–µ—Å—è—Ü
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –†–∞—Å—á—ë—Ç—ã –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —á–∞—Ç–µ –∏–∑ 25 —á–µ–ª–æ–≤–µ–∫. –í –º–µ–Ω—å—à–∏—Ö —á–∞—Ç–∞—Ö –¥–æ—Ö–æ–¥ –±—É–¥–µ—Ç –≤—ã—à–µ (–±–æ–ª—å—à–µ —à–∞–Ω—Å –ø–æ–±–µ–¥—ã), –≤ –±–æ–ª—å—à–∏—Ö ‚Äî –Ω–∏–∂–µ.

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π Telegram

–í –±—É–¥—É—â–µ–º –≤–æ–∑–º–æ–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Stars –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ø—Ä–µ–º–∏—É–º-–∫–æ–π–Ω–æ–≤ (–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Stars ‚Üí –∫–æ–π–Ω—ã).

---

## üõ†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞

**–í—ã–±—Ä–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏**

–ö–æ–º–∞–Ω–¥–∞ `/pidorshop` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –µ–¥–∏–Ω–æ–µ –º–µ–Ω—é —Å–æ –≤—Å–µ–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏:
- ‚úÖ –ë–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–π UX - –≤—Å–µ –ø–æ–∫—É–ø–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ –ú–µ–Ω—å—à–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏
- ‚úÖ –õ–µ–≥—á–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ –±—É–¥—É—â–µ–º

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏:**
- üì¢ –°–æ–æ–±—â–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞ –≤–∏–¥–Ω–æ –≤—Å–µ–º—É —á–∞—Ç—É (—Å–æ–∑–¥–∞–µ—Ç –∏–≥—Ä–æ–≤—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É)
- üîí –ö–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã–∑–≤–∞–≤—à–µ–≥–æ (–ø—Ä–æ–≤–µ—Ä–∫–∞ `user_id` –≤ callback)
- üí° –§–æ—Ä–º–∞—Ç callback_data: `shop_{item}_{owner_user_id}` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
- ‚úÖ –ö–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É –≤–∏–¥–∏–º–æ—Å—Ç—å—é –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å—é –ø–æ–∫—É–ø–æ–∫

### –≠—Ç–∞–ø 1: MVP (–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç) ‚úÖ –ó–ê–í–ï–†–®–ï–ù

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (2026-01-08)

1. ‚úÖ –ó–∞–ø—É—â–µ–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–π–Ω–æ–≤
2. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ: **4 –∫–æ–π–Ω–∞ –∑–∞ –ø–æ–±–µ–¥—É** (–≤–º–µ—Å—Ç–æ 1)
3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω `/pidorshop` —Å 3 —Ç–æ–≤–∞—Ä–∞–º–∏:
   - ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∏–¥–æ—Ä–∞ (10 –∫–æ–π–Ω–æ–≤) - —Å –∫—É–ª–¥–∞—É–Ω–æ–º 7 –¥–Ω–µ–π
   - ‚úÖ –î–≤–æ–π–Ω–æ–π —à–∞–Ω—Å (8 –∫–æ–π–Ω–æ–≤) - —É–¥–≤–∞–∏–≤–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–±–µ–¥—ã
   - ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (3 –∫–æ–π–Ω–∞) - –Ω–∞–≥—Ä–∞–¥–∞ 30 –∫–æ–π–Ω–æ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ
4. ‚úÖ –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (270 —Ç–µ—Å—Ç–æ–≤, 86% –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞)
5. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (`/pidorules`, `docs/commands.txt`)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `bot/app/models.py`: –º–æ–¥–µ–ª–∏ `GamePlayerEffect`, `Prediction`
- `bot/handlers/game/shop_service.py`: –ª–æ–≥–∏–∫–∞ –ø–æ–∫—É–ø–æ–∫ –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫
- `bot/handlers/game/shop_helpers.py`: UI –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `bot/handlers/game/commands.py`: –∫–æ–º–∞–Ω–¥–∞ `/pidorshop` –∏ callback-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- `migrations/`: 2 –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü
- `tests/`: 43 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–∞ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –≠—Ç–∞–ø 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

1. –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ —Å–µ—Ä–∏–∏ –ø–æ–±–µ–¥
2. –í–Ω–µ–¥—Ä–∏—Ç—å –º–∞–≥–∞–∑–∏–Ω —Å—Ç–∏–∫–µ—Ä–æ–≤
3. –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∏—Ç—É–ª—ã
4. –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —ç–∫–æ–Ω–æ–º–∏–∫–∏

### –≠—Ç–∞–ø 3: –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram Stars (–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –ø–æ–∫—É–ø–∫–∞)
2. –ü—Ä–µ–º–∏—É–º-–∫–æ–π–Ω—ã –¥–ª—è —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
3. –°–∏—Å—Ç–µ–º–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –¥–ª—è –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ä–æ—Å—Ç–∞

---

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### MVP v1: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚úÖ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (2026-01-08, —É–ª—É—á—à–µ–Ω–æ 2026-01-09)

‚ö†Ô∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –≠—Ñ—Ñ–µ–∫—Ç—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –∏–≥—Ä–∞–º —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É `GamePlayerEffect` —Å —Å–æ—Å—Ç–∞–≤–Ω—ã–º –∫–ª—é—á–æ–º `(game_id, user_id)`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–≥—Ä–∞—Ö (—á–∞—Ç–∞—Ö) —Å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏.

```python
# –ú–æ–¥–µ–ª—å –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä–µ
class GamePlayerEffect(Base):
    __tablename__ = 'gameplayereffect'

    id: Optional[int]
    game_id: int  # –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ game.id
    user_id: int  # –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ tguser.id

    # –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∏–¥–æ—Ä–∞ (year+day) - v3 —É–ª—É—á—à–µ–Ω–∏–µ
    immunity_year: Optional[int] = None
    immunity_day: Optional[int] = None
    immunity_last_used: Optional[datetime] = None  # –î–ª—è –∫—É–ª–¥–∞—É–Ω–∞

    # –î–≤–æ–π–Ω–æ–π —à–∞–Ω—Å —Ç–µ–ø–µ—Ä—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ DoubleChancePurchase
    next_win_multiplier: int = 1

    # UniqueConstraint –Ω–∞ (game_id, user_id)

# –ú–æ–¥–µ–ª—å –¥–ª—è –ø–æ–∫—É–ø–æ–∫ –¥–≤–æ–π–Ω–æ–≥–æ —à–∞–Ω—Å–∞ - v3 –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞
class DoubleChancePurchase(Base):
    __tablename__ = 'doublechancepurchase'

    id: Optional[int]
    game_id: int  # –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ game.id
    buyer_id: int  # –ö—Ç–æ –∫—É–ø–∏–ª (–≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ tguser.id)
    target_id: int  # –î–ª—è –∫–æ–≥–æ –∫—É–ø–∏–ª (–≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ tguser.id)
    year: int  # –ì–æ–¥ –î–ï–ô–°–¢–í–ò–Ø (–Ω–µ –ø–æ–∫—É–ø–∫–∏!)
    day: int   # –î–µ–Ω—å –î–ï–ô–°–¢–í–ò–Ø (–Ω–µ –ø–æ–∫—É–ø–∫–∏!)
    is_used: bool = False  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ª–∏ (–ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã)
    created_at: datetime

    # UniqueConstraint –Ω–∞ (game_id, buyer_id, year, day) - –æ–¥–∏–Ω –ø–æ–∫—É–ø–∞—Ç–µ–ª—å = –æ–¥–Ω–∞ –ø–æ–∫—É–ø–∫–∞ –≤ –¥–µ–Ω—å

# –ú–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
class Prediction(Base):
    __tablename__ = 'prediction'

    id: Optional[int]
    game_id: int
    user_id: int  # –ö—Ç–æ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç
    predicted_user_id: int  # –ö–æ–≥–æ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—é—Ç
    year: int
    day: int
    is_correct: Optional[bool] = None
    created_at: datetime

    # UniqueConstraint –Ω–∞ (game_id, user_id, year, day)
```

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**

```python
# bot/handlers/game/shop_service.py
def is_leap_year(year: int) -> bool  # v3 –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
def get_days_in_year(year: int) -> int  # v3 –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
def calculate_next_day(current_date: date, year: int) -> tuple[int, int]  # v3 –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
def get_or_create_player_effects(db_session, game_id, user_id)
def spend_coins(db_session, game_id, user_id, amount, year, reason)
def can_afford(db_session, game_id, user_id, price)
def buy_immunity(db_session, game_id, user_id, year, current_date)  # v3 –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è year+day
def buy_double_chance(db_session, game_id, user_id, target_user_id, year, current_date)  # v3 –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è DoubleChancePurchase
def create_prediction(db_session, game_id, user_id, predicted_user_id, year, day)
def get_active_effects(db_session, game_id, user_id, current_date)  # v3 –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è UI

# bot/handlers/game/shop_helpers.py
def format_date_readable(year: int, day: int) -> str  # v3 –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
def create_shop_keyboard(owner_user_id: int, active_effects: dict) -> InlineKeyboardMarkup  # v3 –æ–±–Ω–æ–≤–ª–µ–Ω–æ
def create_prediction_keyboard(players: List[TGUser], owner_user_id: int)
def create_double_chance_keyboard(players: List[TGUser], owner_user_id: int)
def format_shop_menu_message(balance: int, user_name: str, active_effects: dict) -> str  # v3 –æ–±–Ω–æ–≤–ª–µ–Ω–æ
def parse_shop_callback_data(callback_data: str) -> Tuple[str, int]

# bot/handlers/game/game_effects_service.py (–Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å v2, –æ–±–Ω–æ–≤–ª—ë–Ω v3)
def filter_protected_players(db_session, game_id, players, current_date)  # v3 –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è year+day
def build_selection_pool(db_session, game_id, players, current_date)  # v3 –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è DoubleChancePurchase
def check_winner_immunity(db_session, game_id, winner, current_date)  # v3 –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è year+day
def reset_double_chance(db_session, game_id, user_id, current_date)  # v3 –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è DoubleChancePurchase
def is_immunity_enabled(current_datetime)

# bot/handlers/game/prediction_service.py (–Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å v2)
def get_predictions_for_day(db_session, game_id, year, day)
def process_predictions(db_session, game_id, year, day, winner_id)
def format_predictions_summary(predictions_results, db_session)
def award_correct_predictions(db_session, game_id, year, predictions_results)
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π:**
- ‚úÖ –ó–∞—â–∏—Ç–∞: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤, –ø–µ—Ä–µ–≤—ã–±–æ—Ä, –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ–π–Ω–æ–≤ (v3: year+day –≤–º–µ—Å—Ç–æ datetime)
- ‚úÖ –î–≤–æ–π–Ω–æ–π —à–∞–Ω—Å: —É–¥–≤–æ–µ–Ω–∏–µ –≤ –ø—É–ª–µ –≤—ã–±–æ—Ä–∞, –∞–≤—Ç–æ—Å–±—Ä–æ—Å –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã, –ø–æ–∫—É–ø–∫–∞ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ (v3: –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø–∏–¥–æ—Ä–∞, –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –ª–æ–≥–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ UI —É–ª—É—á—à–µ–Ω–∏—è: –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤, –ø–æ–Ω—è—Ç–Ω—ã–µ –¥–∞—Ç—ã, –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (v3)

#### –ë—É–¥—É—â–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ: –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∞–≥–∞–∑–∏–Ω–∞

```python
class CoinShop(Base):
    __tablename__ = 'coin_shop'

    id: int
    item_type: str      # 'immunity', 'title', 'sticker', 'phrase'
    name: str
    description: str
    cost: int
    coin_type: str      # 'game' –∏–ª–∏ 'premium'
    is_active: bool

class UserPurchase(Base):
    __tablename__ = 'user_purchase'

    id: int
    user_id: int
    game_id: int
    shop_item_id: int
    purchased_at: datetime
    expires_at: datetime  # –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
    is_used: bool

class Achievement(Base):
    __tablename__ = 'achievement'

    id: int
    code: str           # 'first_blood', 'veteran', etc.
    name: str
    description: str
    reward: int

class UserAchievement(Base):
    __tablename__ = 'user_achievement'

    id: int
    user_id: int
    game_id: int
    achievement_id: int
    earned_at: datetime
```

---

### –ê–Ω—Ç–∏–∏–Ω—Ñ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã

1. **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –Ω–∞–ª–æ–≥**: 5% –Ω–∞ –±–∞–ª–∞–Ω—Å—ã >200 –∫–æ–π–Ω–æ–≤
2. **–°–µ–∑–æ–Ω–Ω—ã–µ —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏**: -30% –Ω–∞ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞**: –ú–∞–∫—Å–∏–º—É–º 500 –∫–æ–π–Ω–æ–≤
4. **–ò—Å—Ç–µ–∫–∞—é—â–∏–µ –±–æ–Ω—É—Å—ã**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –¥–µ–π—Å—Ç–≤—É—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è

---

### –í–∞–∂–Ω—ã–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã

‚ö†Ô∏è **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- –ß—ë—Ç–∫–æ —É–∫–∞–∑—ã–≤–∞—Ç—å, —á—Ç–æ –∫–æ–π–Ω—ã ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –≤–∞–ª—é—Ç–∞ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –ø—Ä–µ–º–∏—É–º-–∫–æ–π–Ω–æ–≤
- –ù–µ –¥–µ–ª–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –∫–æ–π–Ω–æ–≤ –≤ –¥–µ–Ω—å–≥–∏

---

## üìà –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –ø–æ–±–µ–¥—É | 4 –∫–æ–π–Ω–∞ |
| –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –∫–æ–º–∞–Ω–¥—É | 1 –∫–æ–π–Ω |
| –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω | 5-80 –∫–æ–π–Ω–æ–≤ |
| –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è | 10-100 –∫–æ–π–Ω–æ–≤ |

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–µ—Ä–≤—É—é –ø–æ–∫—É–ø–∫—É –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ 3-5 –¥–Ω–µ–π
- –ü—Ä–µ—Å—Ç–∏–∂–Ω—ã–µ –≤–µ—â–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã
- –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å—é
- –ú–æ—Ç–∏–≤–∞—Ü–∏—è –∫ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É —É—á–∞—Å—Ç–∏—é

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2026-01-05*

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2026-01-08 (v2): ‚úÖ –£–õ–£–ß–®–ï–ù–ò–Ø –ü–û–°–õ–ï MVP v1

**–ó–∞–≤–µ—Ä—à—ë–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ª—É—á—à–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞ –ø–∏–¥–æ—Ä-–∫–æ–π–Ω–æ–≤:**

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–î–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –¥–ª—è –ª—é–±–æ–≥–æ –∏–≥—Ä–æ–∫–∞** - —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ–±—è, –Ω–æ –∏ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ (—Ç—Ä–æ–ª–ª–∏–Ω–≥ –¥—Ä—É–∑–µ–π)
- ‚úÖ **–û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ö** - –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞** - —Å–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `docs/testing-guide.md` —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ —Ç–µ—Å—Ç-–∫–µ–π—Å–∞–º–∏

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å `game_effects_service.py` - –≤—ã–Ω–µ—Å–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞ (–∑–∞—â–∏—Ç–∞, –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å)
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å `prediction_service.py` - –≤—ã–Ω–µ—Å–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `pidor_cmd` - —Ä–∞–∑–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ —É–º–µ–Ω—å—à–µ–Ω —Å ~280 –¥–æ ~100 —Å—Ç—Ä–æ–∫
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å - –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–æ–¥–µ–ª—è—Ö:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `double_chance_bought_by` –≤ `GamePlayerEffect` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `g2h3i4j5k6l7_add_gameplayereffect_table.py`

**–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `bot/handlers/game/game_effects_service.py`: 5 —Ñ—É–Ω–∫—Ü–∏–π –ª–æ–≥–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- `bot/handlers/game/prediction_service.py`: 4 —Ñ—É–Ω–∫—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- `bot/handlers/game/shop_helpers.py`: –¥–æ–±–∞–≤–ª–µ–Ω–∞ `create_double_chance_keyboard()`
- `bot/handlers/game/commands.py`: –¥–æ–±–∞–≤–ª–µ–Ω `handle_shop_double_confirm_callback()`
- `docs/testing-guide.md`: –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞
- `tests/handlers/game/test_game_effects_service.py`: 10 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
- `tests/handlers/game/test_prediction_service.py`: 9 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `bot/handlers/game/shop_service.py`: `buy_double_chance()` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `target_user_id`
- `bot/handlers/game/commands.py`: —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `pidor_cmd`, –æ–±–Ω–æ–≤–ª—ë–Ω `handle_shop_double_callback()`
- `bot/handlers/game/text_static.py`: –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `bot/dispatcher.py`: –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π callback-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- `docs/commands.txt`: –æ–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–≤–æ–π–Ω–æ–≥–æ —à–∞–Ω—Å–∞

**–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ 19 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏
- –í—Å–µ 16 —ç—Ç–∞–ø–æ–≤ –ø–ª–∞–Ω–∞ —É–ª—É—á—à–µ–Ω–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã


### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2026-01-09 (v3): ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–´

**–ó–∞–≤–µ—Ä—à—ë–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ö—Ä–∞–Ω–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞:**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ó–∞—â–∏—Ç–∞ –∏ –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `datetime` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
- –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –±–∞–≥–∏ —Å –≤—Ä–µ–º–µ–Ω–µ–º —Å—É—Ç–æ–∫: –∑–∞—â–∏—Ç–∞, –∫—É–ø–ª–µ–Ω–Ω–∞—è –≤ 10:00, –º–æ–≥–ª–∞ —Å—Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å
- –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `year+day`, —á—Ç–æ –±—ã–ª–æ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ year+day** - –≤—Å–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ **–î–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ** - —Å–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `DoubleChancePurchase` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö –ø–æ–∫—É–ø–æ–∫
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –ø–æ–∫—É–ø–∫–∏** - –æ–¥–∏–Ω –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –∫—É–ø–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –≤ –¥–µ–Ω—å
- ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏** - –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–≤ –º–æ–≥—É—Ç –∫—É–ø–∏—Ç—å –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –æ–¥–Ω–æ–º—É –∏–≥—Ä–æ–∫—É

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

```python
# –ë–´–õ–û (–ø—Ä–æ–±–ª–µ–º–Ω–æ–µ):
class GamePlayerEffect(Base):
    immunity_until: Optional[datetime]  # ‚ùå –ë–∞–≥ —Å –≤—Ä–µ–º–µ–Ω–µ–º —Å—É—Ç–æ–∫
    double_chance_until: Optional[datetime]  # ‚ùå –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è–º–∏
    double_chance_bought_by: Optional[int]  # ‚ùå –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ–∫—É–ø–∞—Ç–µ–ª—å

# –°–¢–ê–õ–û (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ):
class GamePlayerEffect(Base):
    immunity_year: Optional[int]  # ‚úÖ –ì–æ–¥ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—Ç—ã
    immunity_day: Optional[int]   # ‚úÖ –î–µ–Ω—å –≥–æ–¥–∞ –¥–µ–π—Å—Ç–≤–∏—è (1-366)
    immunity_last_used: Optional[datetime]  # ‚úÖ –î–ª—è –∫—É–ª–¥–∞—É–Ω–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
    # –ü–æ–ª—è double_chance —É–¥–∞–ª–µ–Ω—ã - –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É

class DoubleChancePurchase(Base):  # ‚úÖ –ù–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê
    game_id: int
    buyer_id: int      # –ö—Ç–æ –∫—É–ø–∏–ª
    target_id: int     # –î–ª—è –∫–æ–≥–æ –∫—É–ø–∏–ª
    year: int          # –ì–æ–¥ –î–ï–ô–°–¢–í–ò–Ø (–Ω–µ –ø–æ–∫—É–ø–∫–∏!)
    day: int           # –î–µ–Ω—å –î–ï–ô–°–¢–í–ò–Ø (–Ω–µ –ø–æ–∫—É–ø–∫–∏!)
    is_used: bool      # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ª–∏ (–ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã)
    created_at: datetime
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ year+day:**
- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞: `day == current_day` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è–º–∏
- ‚úÖ –ú–µ–Ω—å—à–µ –±–∞–≥–æ–≤

**–£–ª—É—á—à–µ–Ω–∏—è UI:**
- ‚úÖ **–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤** - –≤ –º–∞–≥–∞–∑–∏–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚úÖ –ø–µ—Ä–µ–¥ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
- ‚úÖ **–ü–æ–Ω—è—Ç–Ω—ã–µ –¥–∞—Ç—ã** - "9 —è–Ω–≤–∞—Ä—è" –≤–º–µ—Å—Ç–æ "2026-01-09"
- ‚úÖ **–ò–º–µ–Ω–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö** - "–ò–≤–∞–Ω –ø—Ä–µ–¥—Å–∫–∞–∑–∞–ª" –≤–º–µ—Å—Ç–æ "–í—ã –ø—Ä–µ–¥—Å–∫–∞–∑–∞–ª–∏"

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `bot/app/models.py`: –∏–∑–º–µ–Ω–µ–Ω–∞ –º–æ–¥–µ–ª—å `GamePlayerEffect`, –¥–æ–±–∞–≤–ª–µ–Ω–∞ `DoubleChancePurchase`
- `bot/handlers/game/shop_service.py`: –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∫—É–ø–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
- `bot/handlers/game/shop_helpers.py`: –¥–æ–±–∞–≤–ª–µ–Ω–∞ `format_date_readable()`, –æ–±–Ω–æ–≤–ª–µ–Ω—ã UI —Ñ—É–Ω–∫—Ü–∏–∏
- `bot/handlers/game/game_effects_service.py`: –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- `bot/handlers/game/text_static.py`: —É–ª—É—á—à–µ–Ω—ã —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- `migrations/versions/`: 2 –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ 48 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ year+day –ª–æ–≥–∏–∫–∏
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ (74 —Ç–µ—Å—Ç–∞ –≤—Å–µ–≥–æ)


### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2026-01-08 (v1): ‚úÖ MVP v1 –†–ï–ê–õ–ò–ó–û–í–ê–ù

**–ó–∞–≤–µ—Ä—à–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞ –ø–∏–¥–æ—Ä-–∫–æ–π–Ω–æ–≤:**
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ 3 —Ç–æ–≤–∞—Ä–∞ MVP: –ó–∞—â–∏—Ç–∞ (10 –∫–æ–π–Ω–æ–≤), –î–≤–æ–π–Ω–æ–π —à–∞–Ω—Å (8 –∫–æ–π–Ω–æ–≤), –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (3 –∫–æ–π–Ω–∞)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –∏–∑–æ–ª—è—Ü–∏–µ–π —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø–æ –∏–≥—Ä–∞–º (–º–æ–¥–µ–ª—å `GamePlayerEffect`)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É `pidor_cmd` —Å–æ –≤—Å–µ–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω `/pidorshop` —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ 43 —Ç–µ—Å—Ç–∞ (270 —Ç–µ—Å—Ç–æ–≤ –≤—Å–µ–≥–æ, 86% –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ –∏ –ø—Ä–∞–≤–∏–ª –∏–≥—Ä—ã

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- –≠—Ñ—Ñ–µ–∫—Ç—ã –º–∞–≥–∞–∑–∏–Ω–∞ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –ø–∞—Ä–µ `(game_id, user_id)` —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `GamePlayerEffect`
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–≥—Ä–∞—Ö —Å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
- –†–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–ª–∏—è–ª–∏ –±—ã –Ω–∞ –≤—Å–µ —á–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `bot/app/models.py`: –º–æ–¥–µ–ª–∏ `GamePlayerEffect`, `Prediction`
- `bot/handlers/game/shop_service.py`: 7 —Ñ—É–Ω–∫—Ü–∏–π –ª–æ–≥–∏–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞
- `bot/handlers/game/shop_helpers.py`: 6 —Ñ—É–Ω–∫—Ü–∏–π UI –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `bot/handlers/game/commands.py`: –∫–æ–º–∞–Ω–¥–∞ `/pidorshop` + 4 callback-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
- `bot/handlers/game/text_static.py`: 16 —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç
- `migrations/versions/`: 2 –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- `tests/handlers/game/`: 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Ç–µ—Å—Ç–æ–≤ (43 —Ç–µ—Å—Ç–∞)

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
- –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —ç–∫–æ–Ω–æ–º–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –≠—Ç–∞–ø—É 2: —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2026-01-07

*–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:*
- *–£–±—Ä–∞–Ω–∞ —Å–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏*
- *–û–±—ä–µ–¥–∏–Ω–µ–Ω—ã —Å–µ—Ä–∏–∏ –ø–æ–±–µ–¥ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–µ—Å—è—Ü–∞ –≤ –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π*
- *–£–¥–∞–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –±–æ–Ω—É—Å" - –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è*
- *–£–¥–∞–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–ü–µ—Ä–≤—ã–π —Ä–æ–∑—ã–≥—Ä—ã—à –¥–Ω—è" - –ª–æ–≥–∏–∫–∞ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –∏–≥—Ä–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö*
- *–£–ø—Ä–æ—â–µ–Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —ç–∫–æ–Ω–æ–º–∏–∫–∏*
- *–°–æ—Ö—Ä–∞–Ω–µ–Ω –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å—é*
- *–°–æ–∫—Ä–∞—â–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–µ –¥–æ –æ–¥–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è*
- *–ü–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–∞ —ç–∫–æ–Ω–æ–º–∏–∫–∞ –¥–ª—è —á–∞—Ç–∞ –∏–∑ 25 —á–µ–ª–æ–≤–µ–∫*
- *–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö –ø–æ–∫—É–ø–æ–∫ –∑–∞—â–∏—Ç—ã (–±—ã–ª–æ "6 —Ä–∞–∑", —Å—Ç–∞–ª–æ "4 —Ä–∞–∑–∞" ‚Äî —É—á–∏—Ç—ã–≤–∞—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 1 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)*

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2026-01-20 (v4): üìã –ù–û–í–´–ï –§–£–ù–ö–¶–ò–ò –ó–ê–ü–õ–ê–ù–ò–†–û–í–ê–ù–´

**–î–æ–±–∞–≤–ª–µ–Ω—ã –¥–≤–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —ç–∫–æ–Ω–æ–º–∏–∫—É:**

**1. –ü–µ—Ä–µ–≤—ã–±–æ—Ä—ã (Reroll):**
- –°—Ç–æ–∏–º–æ—Å—Ç—å: 15 –∫–æ–π–Ω–æ–≤
- –ü–æ—Å–ª–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–∏–¥–æ—Ä–∞ –¥–Ω—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞
- –õ–∏–º–∏—Ç: 1 –ø–µ—Ä–µ–≤—ã–±–æ—Ä –Ω–∞ —á–∞—Ç –≤ –¥–µ–Ω—å
- –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ: 5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- –¢–µ–∫—É—â–∏–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—å —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–µ

**2. –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–π–Ω–æ–≤ (Transfer):**
- –ö–æ–º–∏—Å—Å–∏—è: 10% (–º–∏–Ω–∏–º—É–º 1 –∫–æ–π–Ω)
- –ö–æ–º–∏—Å—Å–∏—è –∏–¥—ë—Ç –≤ –±–∞–Ω–∫ —á–∞—Ç–∞
- –ú–∏–Ω–∏–º—É–º –ø–µ—Ä–µ–¥–∞—á–∏: 2 –∫–æ–π–Ω–∞
- –ö—É–ª–¥–∞—É–Ω: 1 –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –¥–µ–Ω—å
- –ö–æ–º–∞–Ω–¥–∞: `/pidorsend @username —Å—É–º–º–∞`
- –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞: `/pidorbank` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –±–∞–ª–∞–Ω—Å–∞ –±–∞–Ω–∫–∞

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "5. –ü–µ—Ä–µ–≤—ã–±–æ—Ä—ã (Reroll)"
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "6. –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–π–Ω–æ–≤ (Transfer)"
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ü–µ–Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ `SHOP_PRICES`
- –î–æ–±–∞–≤–ª–µ–Ω—ã `TRANSFER_PARAMS`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –ø–æ–∫—É–ø–æ–∫ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ë–∞–ª–∞–Ω—Å —ç–∫–æ–Ω–æ–º–∏–∫–∏"


### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2026-01-22 (v5): ‚úÖ –£–õ–£–ß–®–ï–ù–ò–Ø UX –ü–†–ï–î–°–ö–ê–ó–ê–ù–ò–ô

**–ó–∞–≤–µ—Ä—à–µ–Ω—ã —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞ –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π:**

**–ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã:**
- ‚ùå –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" –±—ã–ª–∞ –≤–Ω–∏–∑—É –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ‚Äî –Ω–µ—É–¥–æ–±–Ω–æ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∏–≥—Ä–æ–∫–æ–≤
- ‚ùå –ù–µ–ª—å–∑—è –±—ã–ª–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å —Å–∞–º–æ–≥–æ —Å–µ–±—è (–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ)
- ‚ùå –ö–Ω–æ–ø–∫–∏ "–í—ã–±–µ—Ä–∏—Ç–µ –µ—â—ë –æ–¥–Ω–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞" –∏ "–û—Ç–º–µ–Ω–∞" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏
- ‚ùå –í—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –≤ –ø–∞–º—è—Ç–∏ (`context.user_data`) ‚Äî —Ç–µ—Ä—è–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ **–ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –Ω–∞–≤–µ—Ä—Ö** ‚Äî —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞
- ‚úÖ **–†–∞–∑—Ä–µ—à–µ–Ω–æ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–±—è** ‚Äî —É–±—Ä–∞–Ω–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `self_prediction`
- ‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∞"** ‚Äî –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –≤—ã–±–æ—Ä –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–∞–≥–∞–∑–∏–Ω
- ‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ "–í—ã–±–µ—Ä–∏—Ç–µ –µ—â—ë"** ‚Äî –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –¥–æ –ª–∏–º–∏—Ç–∞
- ‚úÖ **–•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î** ‚Äî —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `PredictionDraft`

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

```python
# –ù–û–í–ê–Ø –ú–û–î–ï–õ–¨ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
class PredictionDraft(Base):
    __tablename__ = 'predictiondraft'

    id: Optional[int]
    game_id: int  # –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ game.id
    user_id: int  # –ö—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
    selected_user_ids: str  # JSON-–º–∞—Å—Å–∏–≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
    candidates_count: int  # –°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å
    created_at: datetime
    updated_at: datetime

    # UniqueConstraint –Ω–∞ (game_id, user_id) - –æ–¥–∏–Ω —á–µ—Ä–Ω–æ–≤–∏–∫ –Ω–∞ –∏–≥—Ä–æ–∫–∞
```

**–ù–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `get_or_create_prediction_draft()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
- `update_prediction_draft()` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- `delete_prediction_draft()` ‚Äî —É–¥–∞–ª–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è/–æ—Ç–º–µ–Ω—ã
- `get_prediction_draft()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —á–µ—Ä–Ω–æ–≤–∏–∫

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `bot/app/models.py`: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `PredictionDraft`
- `bot/handlers/game/prediction_service.py`: –¥–æ–±–∞–≤–ª–µ–Ω—ã 4 —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å —á–µ—Ä–Ω–æ–≤–∏–∫–∞–º–∏
- `bot/handlers/game/shop_helpers.py`: `create_prediction_keyboard()` ‚Äî –∫–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" –Ω–∞–≤–µ—Ä—Ö—É
- `bot/handlers/game/shop_service.py`: `create_prediction()` ‚Äî —É–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ self-prediction
- `bot/handlers/game/commands.py`: –æ–±–Ω–æ–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î –≤–º–µ—Å—Ç–æ –ø–∞–º—è—Ç–∏
  - `handle_shop_predict_callback()` ‚Äî —Å–æ–∑–¥–∞—ë—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ –≤ –ë–î
  - `handle_shop_predict_select_callback()` ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ –≤ –ë–î
  - `handle_shop_predict_confirm_callback()` ‚Äî —á–∏—Ç–∞–µ—Ç –∏–∑ –ë–î –∏ —É–¥–∞–ª—è–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫
  - `handle_shop_predict_cancel_callback()` ‚Äî –Ω–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–º–µ–Ω—ã
- `bot/dispatcher.py`: –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–º–µ–Ω—ã
- `migrations/versions/i4j5k6l7m8n9_add_prediction_draft_table.py`: –Ω–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

**–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–∞–¥–∞—é—â–∏–µ unit-—Ç–µ—Å—Ç—ã –≤ `test_shop_commands.py`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ–ª–æ—É –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ ‚úÖ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- ‚úÖ –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å ‚Äî —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å ‚Äî –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
- ‚úÖ –û—Ç–ª–∞–¥–∫–∞ ‚Äî –ª–µ–≥–∫–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –≤ –ë–î
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚Äî –µ–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ö—Ä–∞–Ω–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö


### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2026-01-23 (v6): ‚úÖ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì –ü–ï–†–ï–í–´–ë–û–†–û–í –ò –≠–§–§–ï–ö–¢–û–í

**–ó–∞–≤–µ—Ä—à—ë–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–≤—ã–±–æ—Ä–æ–≤ —Å —É—á—ë—Ç–æ–º –∏–≥—Ä–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:**

**–ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã:**
- ‚ùå –ü—Ä–∏ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –∑–∞—â–∏—Ç–∞ –∏ –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å
- ‚ùå –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö
- ‚ùå –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ö –∏ –¥–≤–æ–π–Ω–æ–º —à–∞–Ω—Å–µ –±—ã–ª–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- ‚ùå –í —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö –Ω–µ –±—ã–ª–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–π–Ω–∞—Ö

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö** ‚Äî –µ—Å–ª–∏ –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –∏–≥—Ä–æ–∫ –≤—ã–±—Ä–∞–Ω, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–≤—ã–±–æ—Ä
- ‚úÖ **–î–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –ø—Ä–∏ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö** ‚Äî –≤—Å–µ–≥–¥–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç, –¥–∞–∂–µ –µ—Å–ª–∏ —É–∂–µ —Å—Ä–∞–±–æ—Ç–∞–ª
- ‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö** ‚Äî –∑–∞—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –û–ë–ê (—Å—Ç–∞—Ä—ã–π –∏ –Ω–æ–≤—ã–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—å)
- ‚úÖ **–û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∏ –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
- ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–π–Ω–∞—Ö** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

```python
# –ù–û–í–´–ô –°–ï–†–í–ò–° –¥–ª—è –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏ –≤—ã–±–æ—Ä–∞
# bot/handlers/game/selection_service.py

@dataclass
class SelectionResult:
    """–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–±–æ—Ä–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏"""
    winner: TGUser
    had_immunity: bool = False  # –ë—ã–ª–∞ –ª–∏ –∑–∞—â–∏—Ç–∞
    had_double_chance: bool = False  # –ë—ã–ª –ª–∏ –¥–≤–æ–π–Ω–æ–π —à–∞–Ω—Å
    double_chance_buyers: List[str] = field(default_factory=list)  # –ö—Ç–æ –∫—É–ø–∏–ª

def select_winner_with_effects(
    db_session,
    game_id: int,
    players: List[TGUser],
    current_date: date,
    max_reroll_attempts: int = 100
) -> SelectionResult:
    """–í—ã–±–æ—Ä –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Å —É—á—ë—Ç–æ–º –∑–∞—â–∏—Ç—ã –∏ –¥–≤–æ–π–Ω–æ–≥–æ —à–∞–Ω—Å–∞"""
    # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
    # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—É–ª–∞ —Å –¥–≤–æ–π–Ω—ã–º —à–∞–Ω—Å–æ–º
    # –í—ã–±–æ—Ä —Å –ø–µ—Ä–µ–≤—ã–±–æ—Ä–æ–º –ø—Ä–∏ –∑–∞—â–∏—Ç–µ
    # –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
```

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `bot/handlers/game/selection_service.py`: –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å —Å –æ–±—â–µ–π –ª–æ–≥–∏–∫–æ–π –≤—ã–±–æ—Ä–∞ (3 —Ñ—É–Ω–∫—Ü–∏–∏)
- `bot/handlers/game/reroll_service.py`: `execute_reroll()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `select_winner_with_effects()`
- `bot/handlers/game/prediction_service.py`: –¥–æ–±–∞–≤–ª–µ–Ω–∞ `process_predictions_for_reroll()`
- `bot/handlers/game/commands.py`:
  - `pidor_cmd()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `select_winner_with_effects()` –∏ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  - `handle_reroll_callback()` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–π–Ω–∞—Ö –∏ —ç—Ñ—Ñ–µ–∫—Ç–∞—Ö
- `bot/handlers/game/text_static.py`: –æ–±–Ω–æ–≤–ª–µ–Ω—ã —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- `tests/handlers/game/test_selection_service.py`: 8 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ª–æ–≥–∏–∫–∏ –≤—ã–±–æ—Ä–∞
- `tests/handlers/game/test_reroll_service.py`: –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –ø–µ—Ä–µ–≤—ã–±–æ—Ä–æ–≤ —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
- `tests/handlers/game/test_prediction_service.py`: –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –ø—Ä–∏ –ø–µ—Ä–µ–≤—ã–±–æ—Ä–∞—Ö
- `tests/handlers/game/test_integration.py`: 3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞ –¥–ª—è –ø–æ–ª–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ 15+ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏
- –í—Å–µ 11 —ç—Ç–∞–ø–æ–≤ –ø–ª–∞–Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ ‚úÖ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- ‚úÖ –ï–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `pidor_cmd` –∏ `execute_reroll`
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚Äî —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤–µ–∑–¥–µ
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å ‚Äî –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å ‚Äî –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

---
